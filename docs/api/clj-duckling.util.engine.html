<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clj-duckling.util.engine documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-duckling</span> <span class="project-version">0.8.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-duckling</span></div></div></li><li class="depth-2 branch"><a href="clj-duckling.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>corpus</span></div></div></li><li class="depth-3"><a href="clj-duckling.corpus.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>dims</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.dims.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.distance.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distance</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.duration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duration</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.number.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>number</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.quantity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quantity</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.temperature.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>temperature</span></div></a></li><li class="depth-3"><a href="clj-duckling.dims.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-4 branch"><a href="clj-duckling.dims.time.pred.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pred</span></div></a></li><li class="depth-4"><a href="clj-duckling.dims.time.prod.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prod</span></div></a></li><li class="depth-3"><a href="clj-duckling.dims.volume.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>volume</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>engine</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.engine.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="clj-duckling.engine.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>ml</span></div></div></li><li class="depth-3"><a href="clj-duckling.ml.naivebayes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>naivebayes</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>model</span></div></div></li><li class="depth-3"><a href="clj-duckling.model.classifier.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classifier</span></div></a></li><li class="depth-2 branch"><a href="clj-duckling.spec.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>spec</span></div></a></li><li class="depth-2 branch"><a href="clj-duckling.system.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tool</span></div></div></li><li class="depth-3"><a href="clj-duckling.tool.duckling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duckling</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.util.analyze.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>analyze</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.corpus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>corpus</span></div></a></li><li class="depth-3 branch current"><a href="clj-duckling.util.engine.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>engine</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.learn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>learn</span></div></a></li><li class="depth-3"><a href="clj-duckling.util.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-1 branch"><a href="dev.html"><div class="inner"><span class="tree" style="top: -1075px;"><span class="top" style="height: 1084px;"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-duckling.util.engine.html#var-build-rule"><div class="inner"><span>build-rule</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-export-value"><div class="inner"><span>export-value</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-maxlen-judge"><div class="inner"><span>maxlen-judge</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-pass-all"><div class="inner"><span>pass-all</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-pattern-fn"><div class="inner"><span>pattern-fn</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-resolve-token"><div class="inner"><span>resolve-token</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.engine.html#var-rules"><div class="inner"><span>rules</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-duckling.util.engine</h1><div class="doc"><pre class="plaintext">This component parses a phrase and extracts information based on rules.
The two main phases are matching and production.
1. rules are transformed into objets via rules macro
2. rules are (recursively) matched based on theirs pattern vectors.
3. tokens containing final info are produced using their production rules</pre></div><div class="public anchor" id="var-build-rule"><h3>build-rule</h3><div class="usage"><code>(build-rule name pattern production)</code></div><div class="doc"><pre class="plaintext">Builds a new rule
</pre></div></div><div class="public anchor" id="var-export-value"><h3>export-value</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Transforms a token value for API output. Returns the modified value.
</pre></div></div><div class="public anchor" id="var-maxlen-judge"><h3>maxlen-judge</h3><div class="usage"><code>(maxlen-judge stash)</code></div><div class="doc"><pre class="plaintext">Choose the winning token in the stash.
</pre></div></div><div class="public anchor" id="var-pass-all"><h3>pass-all</h3><div class="usage"><code>(pass-all sentence rules logger)</code></div><div class="doc"><pre class="plaintext">Make as many passes as necessary until no new tokens are produced
(there is a limit to avoid infinite loops though)</pre></div></div><div class="public anchor" id="var-pattern-fn"><h3>pattern-fn</h3><div class="usage"><code>(pattern-fn pattern)</code></div><div class="doc"><pre class="plaintext">Makes a pattern function from the pattern slice (regex...)
</pre></div></div><div class="public anchor" id="var-resolve-token"><h3>resolve-token</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Resolve a token based on its dimension, predicate, and the context.
Returns a coll of tokens, since they can have multiple resolutions, or none.
Unresolved tokens are returned as is, without a :value key.</pre></div></div><div class="public anchor" id="var-rules"><h3>rules</h3><div class="usage"><code>(rules forms)</code></div><div class="doc"><pre class="plaintext">Parses a set of rules and 'add' them into 'the-rules'.
Can be called several times, since rules might spread into several files.</pre></div></div></div></body></html>