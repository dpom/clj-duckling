<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clj-duckling.util.time documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-duckling</span> <span class="project-version">0.7.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-duckling</span></div></div></li><li class="depth-2 branch"><a href="clj-duckling.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>corpus</span></div></div></li><li class="depth-3"><a href="clj-duckling.corpus.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>dims</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.dims.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.distance.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distance</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.duration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duration</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.money.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>money</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.number.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>number</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.quantity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quantity</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.dims.temperature.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>temperature</span></div></a></li><li class="depth-3"><a href="clj-duckling.dims.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-4 branch"><a href="clj-duckling.dims.time.pred.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pred</span></div></a></li><li class="depth-4"><a href="clj-duckling.dims.time.prod.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prod</span></div></a></li><li class="depth-3"><a href="clj-duckling.dims.volume.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>volume</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>engine</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.engine.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="clj-duckling.engine.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>ml</span></div></div></li><li class="depth-3"><a href="clj-duckling.ml.naivebayes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>naivebayes</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>model</span></div></div></li><li class="depth-3"><a href="clj-duckling.model.classifier.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classifier</span></div></a></li><li class="depth-2 branch"><a href="clj-duckling.spec.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>spec</span></div></a></li><li class="depth-2 branch"><a href="clj-duckling.system.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tool</span></div></div></li><li class="depth-3"><a href="clj-duckling.tool.duckling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duckling</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></div></li><li class="depth-3 branch"><a href="clj-duckling.util.analyze.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>analyze</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.corpus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>corpus</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.engine.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>engine</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-3 branch"><a href="clj-duckling.util.learn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>learn</span></div></a></li><li class="depth-3 current"><a href="clj-duckling.util.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-1 branch"><a href="dev.html"><div class="inner"><span class="tree" style="top: -1075px;"><span class="top" style="height: 1084px;"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-duckling.util.time.html#var--.3Efields"><div class="inner"><span>-&gt;fields</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-add-to-period"><div class="inner"><span>add-to-period</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-before.3F"><div class="inner"><span>before?</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-day"><div class="inner"><span>day</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-day-of-week"><div class="inner"><span>day-of-week</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-days-in-month"><div class="inner"><span>days-in-month</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-days-in-month-test"><div class="inner"><span>days-in-month-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-end"><div class="inner"><span>end</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-grain-order"><div class="inner"><span>grain-order</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-hour"><div class="inner"><span>hour</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-intersect"><div class="inner"><span>intersect</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-interval"><div class="inner"><span>interval</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-interval-start-end"><div class="inner"><span>interval-start-end</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-minus"><div class="inner"><span>minus</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-minute"><div class="inner"><span>minute</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-month"><div class="inner"><span>month</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-negative-period"><div class="inner"><span>negative-period</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-negative-period-test"><div class="inner"><span>negative-period-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-now"><div class="inner"><span>now</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-period"><div class="inner"><span>period</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-period-.3Eduration"><div class="inner"><span>period-&gt;duration</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-period-fields"><div class="inner"><span>period-fields</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-period-grain"><div class="inner"><span>period-grain</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-period-grain-test"><div class="inner"><span>period-grain-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-plus"><div class="inner"><span>plus</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-plus-period"><div class="inner"><span>plus-period</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-plus-period-test"><div class="inner"><span>plus-period-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-plus-test"><div class="inner"><span>plus-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-round"><div class="inner"><span>round</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-round-test"><div class="inner"><span>round-test</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-sec"><div class="inner"><span>sec</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-start-before-the-end-of.3F"><div class="inner"><span>start-before-the-end-of?</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-starting-at-the-end-of"><div class="inner"><span>starting-at-the-end-of</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-t"><div class="inner"><span>t</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-test-today"><div class="inner"><span>test-today</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-time-fields"><div class="inner"><span>time-fields</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-valid.3F"><div class="inner"><span>valid?</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-year"><div class="inner"><span>year</span></div></a></li><li class="depth-1"><a href="clj-duckling.util.time.html#var-zone"><div class="inner"><span>zone</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-duckling.util.time</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var--.3Efields"><h3>-&gt;fields</h3><div class="usage"><code>(-&gt;fields {:keys [start], :as t})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-add-to-period"><h3>add-to-period</h3><div class="usage"><code>(add-to-period p grain n)</code></div><div class="doc"><pre class="plaintext">Adds the given quantity of grain to the period
</pre></div></div><div class="public anchor" id="var-before.3F"><h3>before?</h3><div class="usage"><code>(before? t1 t2)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-day"><h3>day</h3><div class="usage"><code>(day t)</code></div><div class="doc"><pre class="plaintext">Returns the day of month
</pre></div></div><div class="public anchor" id="var-day-of-week"><h3>day-of-week</h3><div class="usage"><code>(day-of-week t)</code></div><div class="doc"><pre class="plaintext">Returns the day of week of a time grain
</pre></div></div><div class="public anchor" id="var-days-in-month"><h3>days-in-month</h3><div class="usage"><code>(days-in-month tt)</code></div><div class="doc"><pre class="plaintext">Returns the number of days in the month of tt
</pre></div></div><div class="public anchor" id="var-days-in-month-test"><h3>days-in-month-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-end"><h3>end</h3><div class="usage"><code>(end {:keys [start grain end], :as t})</code></div><div class="doc"><pre class="plaintext">Returns the end *instant* of the time object
</pre></div></div><div class="public anchor" id="var-grain-order"><h3>grain-order</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-hour"><h3>hour</h3><div class="usage"><code>(hour t)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-intersect"><h3>intersect</h3><div class="usage"><code>(intersect t1 t2)</code></div><div class="doc"><pre class="plaintext">With the special case of time grains, it's quite easy. Will need to generalize to
intervals later. Returns nil if no intersection.
The result grain is the smallest of the args grains.</pre></div></div><div class="public anchor" id="var-interval"><h3>interval</h3><div class="usage"><code>(interval t1 t2)</code></div><div class="doc"><pre class="plaintext">Builds a time interval between start of t1 and *start* of t2.
The grain is the smallest of the args.</pre></div></div><div class="public anchor" id="var-interval-start-end"><h3>interval-start-end</h3><div class="usage"><code>(interval-start-end t1 t2)</code></div><div class="doc"><pre class="plaintext">Builds a time interval between start of t1 and *end* of t2.
The grain is the smallest of the args.</pre></div></div><div class="public anchor" id="var-minus"><h3>minus</h3><div class="usage"><code>(minus tt grain n)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-minute"><h3>minute</h3><div class="usage"><code>(minute t)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-month"><h3>month</h3><div class="usage"><code>(month t)</code></div><div class="doc"><pre class="plaintext">Returns the month of a time grain
</pre></div></div><div class="public anchor" id="var-negative-period"><h3>negative-period</h3><div class="usage"><code>(negative-period period)</code></div><div class="doc"><pre class="plaintext">Turn a period into its opposite sign
</pre></div></div><div class="public anchor" id="var-negative-period-test"><h3>negative-period-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-now"><h3>now</h3><div class="usage"><code>(now)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-period"><h3>period</h3><div class="usage"><code>(period grain n)</code></div><div class="doc"><pre class="plaintext">Creates a period object with the given grain and quantity (can be negative)
</pre></div></div><div class="public anchor" id="var-period-.3Eduration"><h3>period-&gt;duration</h3><div class="usage"><code>(period-&gt;duration period)</code></div><div class="doc"><pre class="plaintext">Convert a period into an amount of seconds. This is approximate, since for
instance 1 month's duration in seconds depends on which month</pre></div></div><div class="public anchor" id="var-period-fields"><h3>period-fields</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-period-grain"><h3>period-grain</h3><div class="usage"><code>(period-grain period)</code></div><div class="doc"><pre class="plaintext">Returns the grain of the period (the finest of its grains)
</pre></div></div><div class="public anchor" id="var-period-grain-test"><h3>period-grain-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-plus"><h3>plus</h3><div class="usage"><code>(plus tt grain n)</code></div><div class="doc"><pre class="plaintext">Add n grain to tt.
Set the grain to the finest between tt's and the added one.</pre></div></div><div class="public anchor" id="var-plus-period"><h3>plus-period</h3><div class="usage"><code>(plus-period tt period)</code></div><div class="doc"><pre class="plaintext">Adds the period to the time object. The resulting grain is the finest.
</pre></div></div><div class="public anchor" id="var-plus-period-test"><h3>plus-period-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-plus-test"><h3>plus-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-round"><h3>round</h3><div class="usage"><code>(round tt grain)</code></div><div class="doc"><pre class="plaintext">Rounds the time grain to the grain: all smaller grain fields set to 0.
If applied to a true interval (with :end), it turns the interval into
a grain time objects (rounds start, removes :end).</pre></div></div><div class="public anchor" id="var-round-test"><h3>round-test</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-sec"><h3>sec</h3><div class="usage"><code>(sec t)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-start-before-the-end-of.3F"><h3>start-before-the-end-of?</h3><div class="usage"><code>(start-before-the-end-of? t1 t2)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-starting-at-the-end-of"><h3>starting-at-the-end-of</h3><div class="usage"><code>(starting-at-the-end-of tt)</code></div><div class="doc"><pre class="plaintext">Build a time that starts at the end of provided time, with same grain
</pre></div></div><div class="public anchor" id="var-t"><h3>t</h3><div class="usage"><code>(t timezone year)</code><code>(t timezone year month)</code><code>(t timezone year month day)</code><code>(t timezone year month day hour)</code><code>(t timezone year month day hour minute)</code><code>(t timezone year month day hour minute second)</code><code>(t grain timezone year month day hour minute second)</code></div><div class="doc"><pre class="plaintext">Builds a time object with timezone, start and grain.
Timezone is actually extracted from the provided instant.</pre></div></div><div class="public anchor" id="var-test-today"><h3>test-today</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-time-fields"><h3>time-fields</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-valid.3F"><h3>valid?</h3><div class="usage"><code>(valid? {:keys [start grain end], :as t})</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-year"><h3>year</h3><div class="usage"><code>(year t)</code></div><div class="doc"><pre class="plaintext">Returns the year of the start of a time grain
</pre></div></div><div class="public anchor" id="var-zone"><h3>zone</h3><div class="usage"><code>(zone timezone)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>